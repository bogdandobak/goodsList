(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{156:function(e,t,n){},170:function(e,t,n){},176:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(55),a=n.n(r),o=n(54),u=n(111),i=n(11),s=n(10),l=(n(156),n(192)),j=n(141),h=n(80),d=n(191),b=n(194),p=n(196),O=n(50),m=(n(170),n(4)),f=function(e){var t=e.onDelete,n=e.id,r=Object(c.useState)(!1),a=Object(i.a)(r,2),o=a[0],u=a[1];return Object(m.jsxs)(d.a,{basic:!0,onClose:function(){return u(!1)},onOpen:function(){return u(!0)},open:o,size:"small",trigger:Object(m.jsx)(b.a,{children:"Delete"}),children:[Object(m.jsxs)(p.a,{icon:!0,children:[Object(m.jsx)(O.a,{name:"archive"}),"Delete product"]}),Object(m.jsx)(d.a.Content,{children:Object(m.jsx)("p",{className:"text",children:"Are you sure you want to delete this product?"})}),Object(m.jsxs)(d.a.Actions,{children:[Object(m.jsxs)(b.a,{basic:!0,color:"red",inverted:!0,onClick:function(){return u(!1)},children:[Object(m.jsx)(O.a,{name:"remove"})," ","No"]}),Object(m.jsxs)(b.a,{color:"green",inverted:!0,onClick:function(){t(n),u(!1)},children:[Object(m.jsx)(O.a,{name:"checkmark"})," ","Yes"]})]})]})},x=n(193),g=n(189),v=n(19),w=n.n(v),C=n(53),y="https://60645e8ff0919700177857e1.mockapi.io/",k=function(){var e=Object(C.a)(w.a.mark((function e(t){var n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y).concat(t));case 3:return(n=e.sent).ok||console.log(n.statusText),e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 11:throw e.prev=11,e.t0=e.catch(0),new Error;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(C.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y,"/products/").concat(t),{method:"DELETE"});case 3:return(n=e.sent).ok||console.log(n.statusText),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),new Error;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(C.a)(w.a.mark((function e(t){var n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y,"/products"),{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(t)});case 3:return(n=e.sent).ok||console.log(n.statusText),e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 11:throw e.prev=11,e.t0=e.catch(0),new Error;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(C.a)(w.a.mark((function e(t,n){var c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y).concat(t,"/").concat(n));case 3:return(c=e.sent).ok||console.log(c.statusText),e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(0),new Error;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(C.a)(w.a.mark((function e(t,n){var c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y,"products/").concat(n,"/").concat(t));case 3:return(c=e.sent).ok||console.log(c.statusText),e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(0),new Error;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(C.a)(w.a.mark((function e(t,n){var c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y,"/products/").concat(n,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(t)});case 3:return(c=e.sent).ok||console.log(c.statusText),e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(0),new Error;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(C.a)(w.a.mark((function e(t,n){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y,"/products/").concat(t,"/comments/").concat(n),{method:"DELETE"});case 3:return(c=e.sent).ok||console.log(c.statusText),e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),new Error;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),z=n(190),P=n(57),T=n.n(P),N=function(e){var t=e.onCreateComment,n=e.productId,r=Object(c.useState)(!1),a=Object(i.a)(r,2),o=a[0],u=a[1],s=Object(c.useState)(""),l=Object(i.a)(s,2),j=l[0],h=l[1],f=Object(c.useCallback)((function(e){var t=e.target.value;h(t)}),[]),x=Object(c.useCallback)((function(){u(!1),h("")}),[]);return Object(m.jsxs)(d.a,{onSubmit:function(){return u(!1)},onOpen:function(){return u(!0)},open:o,size:"small",trigger:Object(m.jsx)(b.a,{children:"Add Comment"}),children:[Object(m.jsxs)(p.a,{icon:!0,children:[Object(m.jsx)(O.a,{name:"server"}),"Leave your feedback"]}),Object(m.jsx)(d.a.Content,{children:Object(m.jsxs)(z.a,{onSubmit:function(e){if(e.preventDefault(),j){var c={id:T()(),productId:n,description:j,date:new Date};t(c),u(!1),h("")}},children:[Object(m.jsx)(z.a.Group,{widths:"equal",children:Object(m.jsx)(z.a.Input,{label:"Comment",placeholder:"Comment",type:"text",value:j,onChange:f,required:!0})}),Object(m.jsx)(b.a,{children:"Save"}),Object(m.jsx)(b.a,{onClick:x,children:"Cancel"})]})})]})},W=n(71),B=n(83),H=function(e){var t=e.onCreate,n=e.product,r=Object(c.useState)(!1),a=Object(i.a)(r,2),o=a[0],u=a[1],s=Object(c.useState)({imageUrl:n.imageUrl,name:n.name,count:n.count,width:n.size.width,height:n.size.height,weight:n.weight}),l=Object(i.a)(s,2),j=l[0],h=l[1],f=Object(c.useCallback)((function(e){var t=e.target,n=t.value,c=t.name;h((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(W.a)({},c,n))}))}),[]),x=Object(c.useCallback)((function(){u(!1),h({imageUrl:n.imageUrl,name:n.name,count:n.count,width:n.size.width,height:n.size.height,weight:n.weight})}),[]);return Object(m.jsxs)(d.a,{onSubmit:function(){return u(!1)},onOpen:function(){return u(!0)},open:o,size:"small",trigger:Object(m.jsx)(b.a,{children:"Edit Product"}),children:[Object(m.jsxs)(p.a,{icon:!0,children:[Object(m.jsx)(O.a,{name:"server"}),"Edit Product"]}),Object(m.jsx)(d.a.Content,{children:Object(m.jsxs)(z.a,{onSubmit:function(e){e.preventDefault();var c=j.imageUrl,r=j.name,a=j.count,o=j.weight,i=j.height,s=j.width;if(c&&r&&a&&o&&i&&s){var l={id:n.id,imageUrl:c,name:r,count:a,size:{height:i,width:s},weight:o};t(l),u(!1),h({imageUrl:n.imageUrl,name:n.name,count:n.count,width:n.size.width,height:n.size.height,weight:n.weight})}},children:[Object(m.jsxs)(z.a.Group,{widths:"equal",children:[Object(m.jsx)(z.a.Input,{label:"Image url",placeholder:"Image url",type:"url",name:"imageUrl",value:j.imageUrl,onChange:f,required:!0}),Object(m.jsx)(z.a.Input,{label:"Product name",placeholder:"Product name",type:"text",name:"name",value:j.name,onChange:f,required:!0})]}),Object(m.jsxs)(z.a.Group,{widths:"equal",children:[Object(m.jsx)(z.a.Input,{label:"Count",placeholder:"Count",type:"number",name:"count",value:j.count,onChange:f,required:!0}),Object(m.jsx)(z.a.Input,{label:"Width",placeholder:"Width",type:"number",name:"width",value:j.width,onChange:f,required:!0})]}),Object(m.jsxs)(z.a.Group,{widths:"equal",children:[Object(m.jsx)(z.a.Input,{label:"Height",placeholder:"Height",type:"number",name:"height",value:j.height,onChange:f,required:!0}),Object(m.jsx)(z.a.Input,{label:"Weight",placeholder:"Weight",type:"text",name:"weight",value:j.weight,onChange:f,required:!0})]}),Object(m.jsx)(b.a,{children:"Save"}),Object(m.jsx)(b.a,{onClick:x,children:"Cancel"})]})})]})};function G(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return console.log(c),t}})),r=Object(i.a)(n,2),a=r[0],o=r[1];return[a,function(t){try{var n=t instanceof Function?t(a):t;o(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(c){console.log(c)}}]}var J=Object(h.Route)({productId:h.Route.params.enum()},(function(e){var t=e.productId;return"/".concat(t)}))((function(e){var t=e.productId,n=Object(c.useState)({}),r=Object(i.a)(n,2),a=r[0],o=r[1],s=Object(c.useState)([]),l=Object(i.a)(s,2),h=l[0],d=l[1],p=G("product",a),O=Object(i.a)(p,2),f=O[0],v=O[1],w=Object(c.useState)(!1),C=Object(i.a)(w,2),y=C[0],k=C[1];Object(c.useEffect)((function(){var e=setTimeout((function(){return k(!0)}),3e3);return function(){clearTimeout(e)}}),[]),Object(c.useEffect)((function(){E("products",t).then(o)}),[]),Object(c.useEffect)((function(){q("comments",t).then(d)}),[]),Object(c.useEffect)((function(){o(a)}),[a]);var z=Object(c.useCallback)((function(e){U(e,t),d((function(t){return[].concat(Object(u.a)(t),[e])}))}),[]),P=Object(c.useCallback)((function(e){D(t,e),d((function(t){return t.filter((function(t){return t.id!==e}))}))}),[h]),T=Object(c.useCallback)((function(e){S(t),I(e),o(e)}),[]);return Object(c.useEffect)((function(){v(a)}),[a]),y?Object(m.jsxs)(x.a,{children:[Object(m.jsx)(j.a,{src:f.imageUrl,wrapped:!0,ui:!1}),Object(m.jsxs)(x.a.Content,{children:[Object(m.jsx)(x.a.Header,{children:f.name}),Object(m.jsx)(x.a.Description,{children:"Count: ".concat(f.count,", ")+"Width: ".concat(f.size.width,",")+"Height: ".concat(f.size.height,", ")+"Weight: ".concat(f.weight," ")}),Object(m.jsx)("p",{children:"Comments:"}),h.length>0&&h.map((function(e){return Object(m.jsxs)(x.a.Description,{children:[Object(m.jsx)("p",{children:e.description}),Object(m.jsx)(b.a,{size:"mini",onClick:function(){return P(e.id)},children:"Delete"})]},e.id)}))]}),Object(m.jsx)(N,{onCreateComment:z,productId:t}),Object(m.jsx)(H,{onCreate:T,product:f})]}):Object(m.jsx)(g.a,{active:!0})})),A=Object(h.Route)({sortedBy:h.Route.params.enum("","name","count")},(function(e){var t=e.sortedBy;return"/".concat(t)}))((function(e){var t=e.match.params.sortedBy,n=e.products,r=e.onDelete,a=e.onHandlePage,u=Object(c.useCallback)((function(e){a(e)}),[]);return Object(m.jsx)("div",{className:"container",children:n&&n.sort((function(e,n){switch(t){case"name":return e.name.localeCompare(n.name);case"count":return e.count-n.count}})).map((function(e){return Object(m.jsx)(l.a,{verticalAlign:"middle",size:"big",children:Object(m.jsxs)(l.a.Item,{children:[Object(m.jsx)(j.a,{avatar:!0,src:e.imageUrl}),Object(m.jsxs)(l.a.Content,{children:[Object(m.jsx)(l.a.Header,{children:e.name}),Object(m.jsx)(l.a.Description,{children:"Count: ".concat(e.count,", weight: ").concat(e.weight)}),Object(m.jsx)(o.b,{to:J.link({productId:e.id}),onClick:function(){return u(e.id)},children:"Product Description"}),Object(m.jsx)(f,{id:e.id,onDelete:r})]})]},e.id)},e.id)}))})})),R=(n(176),[{sortedBy:"name",id:T()(),title:"Sorted by name"},{sortedBy:"count",id:T()(),title:"Sorted by count"}]),L=function(){return Object(m.jsx)("ul",{className:"sorters",children:R.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(o.c,{to:A.link({sortedBy:e.sortedBy}),children:Object(m.jsx)(b.a,{children:e.title})})},e.id)}))})},F=function(e){var t=e.onCreate,n=Object(c.useState)(!1),r=Object(i.a)(n,2),a=r[0],o=r[1],u=Object(c.useState)({imageUrl:"",name:"",count:"",width:"",height:"",weight:""}),s=Object(i.a)(u,2),l=s[0],j=s[1],h=Object(c.useCallback)((function(e){var t=e.target,n=t.value,c=t.name;j((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(W.a)({},c,n))}))}),[]),f=Object(c.useCallback)((function(){o(!1),j({imageUrl:"",name:"",count:"",width:"",height:"",weight:""})}),[]);return Object(m.jsxs)(d.a,{onSubmit:function(){return o(!1)},onOpen:function(){return o(!0)},open:a,size:"small",trigger:Object(m.jsx)(b.a,{children:"New Product"}),children:[Object(m.jsxs)(p.a,{icon:!0,children:[Object(m.jsx)(O.a,{name:"server"}),"Create Product"]}),Object(m.jsx)(d.a.Content,{children:Object(m.jsxs)(z.a,{onSubmit:function(e){e.preventDefault();var n=l.imageUrl,c=l.name,r=l.count,a=l.weight,u=l.height,i=l.width;if(n&&c&&r&&a&&u&&i){var s={id:T()(),imageUrl:n,name:c,count:r,size:{height:u,width:i},weight:a};t(s),o(!1),j({imageUrl:"",name:"",count:"",width:"",height:"",weight:""})}},children:[Object(m.jsxs)(z.a.Group,{widths:"equal",children:[Object(m.jsx)(z.a.Input,{label:"Image url",placeholder:"Image url",type:"url",name:"imageUrl",value:l.imageUrl,onChange:h,required:!0}),Object(m.jsx)(z.a.Input,{label:"Product name",placeholder:"Product name",type:"text",name:"name",value:l.name,onChange:h,required:!0})]}),Object(m.jsxs)(z.a.Group,{widths:"equal",children:[Object(m.jsx)(z.a.Input,{label:"Count",placeholder:"Count",type:"number",name:"count",value:l.count,onChange:h,required:!0}),Object(m.jsx)(z.a.Input,{label:"Width",placeholder:"Width",type:"number",name:"width",value:l.width,onChange:h,required:!0})]}),Object(m.jsxs)(z.a.Group,{widths:"equal",children:[Object(m.jsx)(z.a.Input,{label:"Height",placeholder:"Height",type:"number",name:"height",value:l.height,onChange:h,required:!0}),Object(m.jsx)(z.a.Input,{label:"Weight",placeholder:"Weight",type:"text",name:"weight",value:l.weight,onChange:h,required:!0})]}),Object(m.jsx)(b.a,{children:"Save"}),Object(m.jsx)(b.a,{onClick:f,children:"Cancel"})]})})]})},Y=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),o=Object(i.a)(a,2),l=o[0],j=o[1],h=G("products",n),d=Object(i.a)(h,2),b=d[0],p=d[1];Object(c.useEffect)((function(){k("products").then(r)}),[]);var O=Object(c.useCallback)((function(e){S(e),r((function(t){return t.filter((function(t){return t.id!==e}))}))}),[n]),f=Object(c.useCallback)((function(e){I(e),r((function(t){return[].concat(Object(u.a)(t),[e])}))}),[]),x=Object(c.useCallback)((function(e){j(e)}),[l]);return Object(c.useEffect)((function(){p(n)}),[n]),Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("h1",{children:"Products"}),Object(m.jsx)(L,{}),Object(m.jsx)(F,{onCreate:f}),Object(m.jsxs)(s.Switch,{children:[Object(m.jsx)(A,{products:b,onDelete:O,onHandlePage:x}),Object(m.jsx)(J,{productId:l,products:b}),Object(m.jsx)(s.Redirect,{to:A.link({sortedBy:""})})]})]})};n(177);a.a.render(Object(m.jsx)(o.a,{children:Object(m.jsx)(Y,{})}),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.1f43a266.chunk.js.map